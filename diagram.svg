<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 1887.9375 1770.109375" style="max-width: 1887.9375px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-svg-1755259861112-93oz76zvw"><style>#mermaid-svg-1755259861112-93oz76zvw{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:rgba(204, 204, 204, 0.87);}#mermaid-svg-1755259861112-93oz76zvw .error-icon{fill:#bf616a;}#mermaid-svg-1755259861112-93oz76zvw .error-text{fill:#bf616a;stroke:#bf616a;}#mermaid-svg-1755259861112-93oz76zvw .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-1755259861112-93oz76zvw .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-1755259861112-93oz76zvw .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-1755259861112-93oz76zvw .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-1755259861112-93oz76zvw .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-1755259861112-93oz76zvw .marker{fill:rgba(204, 204, 204, 0.87);stroke:rgba(204, 204, 204, 0.87);}#mermaid-svg-1755259861112-93oz76zvw .marker.cross{stroke:rgba(204, 204, 204, 0.87);}#mermaid-svg-1755259861112-93oz76zvw svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-1755259861112-93oz76zvw .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:rgba(204, 204, 204, 0.87);}#mermaid-svg-1755259861112-93oz76zvw .cluster-label text{fill:#ffffff;}#mermaid-svg-1755259861112-93oz76zvw .cluster-label span,#mermaid-svg-1755259861112-93oz76zvw p{color:#ffffff;}#mermaid-svg-1755259861112-93oz76zvw .label text,#mermaid-svg-1755259861112-93oz76zvw span,#mermaid-svg-1755259861112-93oz76zvw p{fill:rgba(204, 204, 204, 0.87);color:rgba(204, 204, 204, 0.87);}#mermaid-svg-1755259861112-93oz76zvw .node rect,#mermaid-svg-1755259861112-93oz76zvw .node circle,#mermaid-svg-1755259861112-93oz76zvw .node ellipse,#mermaid-svg-1755259861112-93oz76zvw .node polygon,#mermaid-svg-1755259861112-93oz76zvw .node path{fill:#1a1a1a;stroke:#2a2a2a;stroke-width:1px;}#mermaid-svg-1755259861112-93oz76zvw .flowchart-label text{text-anchor:middle;}#mermaid-svg-1755259861112-93oz76zvw .node .label{text-align:center;}#mermaid-svg-1755259861112-93oz76zvw .node.clickable{cursor:pointer;}#mermaid-svg-1755259861112-93oz76zvw .arrowheadPath{fill:#e5e5e5;}#mermaid-svg-1755259861112-93oz76zvw .edgePath .path{stroke:rgba(204, 204, 204, 0.87);stroke-width:2.0px;}#mermaid-svg-1755259861112-93oz76zvw .flowchart-link{stroke:rgba(204, 204, 204, 0.87);fill:none;}#mermaid-svg-1755259861112-93oz76zvw .edgeLabel{background-color:#1a1a1a99;text-align:center;}#mermaid-svg-1755259861112-93oz76zvw .edgeLabel rect{opacity:0.5;background-color:#1a1a1a99;fill:#1a1a1a99;}#mermaid-svg-1755259861112-93oz76zvw .labelBkg{background-color:rgba(26, 26, 26, 0.5);}#mermaid-svg-1755259861112-93oz76zvw .cluster rect{fill:rgba(64, 64, 64, 0.47);stroke:#30373a;stroke-width:1px;}#mermaid-svg-1755259861112-93oz76zvw .cluster text{fill:#ffffff;}#mermaid-svg-1755259861112-93oz76zvw .cluster span,#mermaid-svg-1755259861112-93oz76zvw p{color:#ffffff;}#mermaid-svg-1755259861112-93oz76zvw div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:#88c0d0;border:1px solid #30373a;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-1755259861112-93oz76zvw .flowchartTitleText{text-anchor:middle;font-size:18px;fill:rgba(204, 204, 204, 0.87);}#mermaid-svg-1755259861112-93oz76zvw :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1755259861112-93oz76zvw_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1755259861112-93oz76zvw_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1755259861112-93oz76zvw_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="mermaid-svg-1755259861112-93oz76zvw_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="mermaid-svg-1755259861112-93oz76zvw_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g id="subGraph1" class="cluster default flowchart-label"><rect height="1477.109375" width="356.890625" y="193" x="0" ry="0" rx="0" style=""/><g transform="translate(128.3359375, 193)" class="cluster-label"><foreignObject height="19" width="100.21875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Memory Layer</span></div></foreignObject></g></g><g id="subGraph0" class="cluster default flowchart-label"><rect height="1090" width="642.796875" y="84" x="976.59375" ry="0" rx="0" style=""/><g transform="translate(1221.921875, 84)" class="cluster-label"><foreignObject height="19" width="152.140625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Context Orchestrator</span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-B" id="L-A-B-0" d="M1297.992,34L1297.992,38.167C1297.992,42.333,1297.992,50.667,1297.992,59C1297.992,67.333,1297.992,75.667,1297.992,83.117C1297.992,90.567,1297.992,97.133,1297.992,100.417L1297.992,103.7"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-C" id="L-B-C-0" d="M1333.559,143L1342.276,147.167C1350.994,151.333,1368.429,159.667,1377.146,168C1385.863,176.333,1385.863,184.667,1385.863,195.833C1385.863,207,1385.863,221,1385.863,235C1385.863,249,1385.863,263,1385.863,277C1385.863,291,1385.863,305,1385.863,319C1385.863,333,1385.863,347,1385.863,362.583C1385.863,378.167,1385.863,395.333,1385.863,412.5C1385.863,429.667,1385.863,446.833,1385.863,462.417C1385.863,478,1385.863,492,1385.863,506C1385.863,520,1385.863,534,1206.109,547.253C1026.354,560.506,666.845,573.011,487.09,579.264L307.336,585.517"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-D" id="L-B-D-0" d="M1262.425,143L1253.708,147.167C1244.991,151.333,1227.556,159.667,1218.838,168C1210.121,176.333,1210.121,184.667,1059.662,194.959C909.203,205.251,608.284,217.501,457.825,223.626L307.366,229.752"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-D LE-D1" id="L-D-D1-0" d="M150.39,252L143.514,256.167C136.638,260.333,122.885,268.667,162.256,277.359C201.627,286.052,294.121,295.104,340.369,299.63L386.616,304.156"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-D LE-D2" id="L-D-D2-0" d="M206.5,252L213.377,256.167C220.253,260.333,234.005,268.667,321.158,278.854C408.311,289.042,568.865,301.084,649.141,307.105L729.418,313.126"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-D2 LE-D3" id="L-D2-D3-0" d="M807.742,336L807.742,340.167C807.742,344.333,807.742,352.667,807.742,360.117C807.742,367.567,807.742,374.133,807.742,377.417L807.742,380.7"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-D3 LE-D4" id="L-D3-D4-0" d="M807.742,439L807.742,443.167C807.742,447.333,807.742,455.667,807.742,463.117C807.742,470.567,807.742,477.133,807.742,480.417L807.742,483.7"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-D4 LE-D5" id="L-D4-D5-0" d="M807.742,523L807.742,527.167C807.742,531.333,807.742,539.667,807.742,547.117C807.742,554.567,807.742,561.133,807.742,564.417L807.742,567.7"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C LE-E" id="L-C-E-0" d="M178.445,607L178.445,611.167C178.445,615.333,178.445,623.667,350.67,634.235C522.895,644.804,867.344,657.608,1039.569,664.01L1211.794,670.412"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-D5 LE-E" id="L-D5-E-0" d="M941.594,601.231L1002.713,606.359C1063.832,611.487,1186.07,621.744,1247.189,630.155C1308.309,638.567,1308.309,645.133,1308.309,648.417L1308.309,651.7"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-E LE-F" id="L-E-F-0" d="M1245.287,691L1229.841,695.167C1214.395,699.333,1183.502,707.667,1168.056,715.117C1152.609,722.567,1152.609,729.133,1152.609,732.417L1152.609,735.7"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-F LE-G" id="L-F-G-0" d="M1152.609,794L1152.609,798.167C1152.609,802.333,1152.609,810.667,1086.212,821.871C1019.814,833.076,887.019,847.152,820.621,854.189L754.224,861.227"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-G LE-H" id="L-G-H-0" d="M666.742,897L666.742,901.167C666.742,905.333,666.742,913.667,666.742,921.117C666.742,928.567,666.742,935.133,666.742,938.417L666.742,941.7"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-H LE-I" id="L-H-I-0" d="M740.945,968.937L833.786,975.114C926.628,981.291,1112.31,993.646,1205.151,1003.106C1297.992,1012.567,1297.992,1019.133,1297.992,1022.417L1297.992,1025.7"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-I LE-J" id="L-I-J-0" d="M1336.607,1065L1346.072,1069.167C1355.536,1073.333,1374.465,1081.667,1426.552,1090.674C1478.638,1099.682,1563.881,1109.365,1606.503,1114.206L1649.124,1119.047"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-J LE-K" id="L-J-K-0" d="M1763.164,1149L1763.164,1153.167C1763.164,1157.333,1763.164,1165.667,1763.164,1174C1763.164,1182.333,1763.164,1190.667,1763.23,1198.2C1763.296,1205.734,1763.428,1212.467,1763.494,1215.834L1763.56,1219.201"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-K LE-L" id="L-K-L-0" d="M1673.178,1330.123L1424.056,1350.871C1174.934,1371.619,676.69,1413.114,427.567,1438.728C178.445,1464.343,178.445,1474.076,178.445,1478.943L178.445,1483.809"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-L LE-M" id="L-L-M-0" d="M178.445,1542.109L178.445,1546.276C178.445,1550.443,178.445,1558.776,178.445,1566.226C178.445,1573.676,178.445,1580.243,178.445,1583.526L178.445,1586.809"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-K LE-N" id="L-K-N-0" d="M1763.664,1420.609L1763.581,1426.276C1763.497,1431.943,1763.331,1443.276,1763.247,1455.393C1763.164,1467.509,1763.164,1480.409,1763.164,1486.859L1763.164,1493.309"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-M LE-P" id="L-M-P-0" d="M178.445,1645.109L178.445,1649.276C178.445,1653.443,178.445,1661.776,178.445,1670.109C178.445,1678.443,178.445,1686.776,178.445,1694.226C178.445,1701.676,178.445,1708.243,178.445,1711.526L178.445,1714.809"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-P2 LE-D" id="L-P2-D-0" d="M178.445,143L178.445,147.167C178.445,151.333,178.445,159.667,178.445,168C178.445,176.333,178.445,184.667,178.445,192.117C178.445,199.567,178.445,206.133,178.445,209.417L178.445,212.7"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-E LE-Q" id="L-E-Q-0" d="M1371.33,691L1386.776,695.167C1402.222,699.333,1433.115,707.667,1448.561,715.117C1464.008,722.567,1464.008,729.133,1464.008,732.417L1464.008,735.7"/><path marker-end="url(#mermaid-svg-1755259861112-93oz76zvw_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-I LE-R" id="L-I-R-0" d="M1271.752,1065L1265.321,1069.167C1258.89,1073.333,1246.027,1081.667,1239.595,1089.117C1233.164,1096.567,1233.164,1103.133,1233.164,1106.417L1233.164,1109.7"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(178.4453125, 1454.609375)" class="edgeLabel"><g transform="translate(-11.328125, -9.5)" class="label"><foreignObject height="19" width="22.65625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Yes</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(1763.1640625, 1454.609375)" class="edgeLabel"><g transform="translate(-9.3984375, -9.5)" class="label"><foreignObject height="19" width="18.796875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">No</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(178.4453125, 590)" id="flowchart-C-119" class="node default default flowchart-label"><rect height="34" width="247.1875" y="-17" x="-123.59375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-116.09375, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="232.1875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">STM.get_recent_turns(recent_k)</span></div></foreignObject></g></g><g transform="translate(178.4453125, 235)" id="flowchart-D-121" class="node default default flowchart-label"><rect height="34" width="247.25" y="-17" x="-123.625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-116.125, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="232.25"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">LTM.search(query, k=ltm_hits_k)</span></div></foreignObject></g></g><g transform="translate(178.4453125, 1515.609375)" id="flowchart-L-149" class="node default default flowchart-label"><rect height="53" width="286.890625" y="-26.5" x="-143.4453125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-135.9453125, -19)" style="" class="label"><rect/><foreignObject height="38" width="271.890625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Summarizer.summarize_chunk(oldest)<br />Hierarchical when needed</span></div></foreignObject></g></g><g transform="translate(178.4453125, 1618.609375)" id="flowchart-M-151" class="node default default flowchart-label"><rect height="53" width="276.421875" y="-26.5" x="-138.2109375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-130.7109375, -19)" style="" class="label"><rect/><foreignObject height="38" width="261.421875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Add summary to LTM<br />(with metadata: session_id, task_id)</span></div></foreignObject></g></g><g transform="translate(1297.9921875, 126)" id="flowchart-B-117" class="node default default flowchart-label"><rect height="34" width="321.484375" y="-17" x="-160.7421875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-153.2421875, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="306.484375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">ContextManager.build_context(user_input)</span></div></foreignObject></g></g><g transform="translate(1308.30859375, 674)" id="flowchart-E-133" class="node default default flowchart-label"><rect height="34" width="182.4375" y="-17" x="-91.21875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-83.71875, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="167.4375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Assemble context parts</span></div></foreignObject></g></g><g transform="translate(1152.609375, 767.5)" id="flowchart-F-137" class="node default default flowchart-label"><rect height="53" width="282.03125" y="-26.5" x="-141.015625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-133.515625, -19)" style="" class="label"><rect/><foreignObject height="38" width="267.03125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">TokenCounter budget-aware pruning:<br />drop LTM → drop STM → truncate</span></div></foreignObject></g></g><g transform="translate(1297.9921875, 1048)" id="flowchart-I-143" class="node default default flowchart-label"><rect height="34" width="351.609375" y="-17" x="-175.8046875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-168.3046875, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="336.609375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">ContextManager.observe(user_input, response)</span></div></foreignObject></g></g><g transform="translate(1464.0078125, 767.5)" id="flowchart-Q-159" class="node default default flowchart-label"><rect height="53" width="240.765625" y="-26.5" x="-120.3828125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-112.8828125, -19)" style="" class="label"><rect/><foreignObject height="38" width="225.765625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Debug: recent_count, ltm_hits,<br />final_tokens, budget</span></div></foreignObject></g></g><g transform="translate(1233.1640625, 1132)" id="flowchart-R-161" class="node default default flowchart-label"><rect height="34" width="92.296875" y="-17" x="-46.1484375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-38.6484375, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="77.296875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">get_stats()</span></div></foreignObject></g></g><g transform="translate(1297.9921875, 17)" id="flowchart-A-116" class="node default default flowchart-label"><rect height="34" width="88.8125" y="-17" x="-44.40625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-36.90625, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="73.8125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">User Input</span></div></foreignObject></g></g><g transform="translate(538.296875, 319)" id="flowchart-D1-123" class="node default default flowchart-label"><rect height="34" width="292.8125" y="-17" x="-146.40625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-138.90625, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="277.8125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">EmbeddingProvider.embed(user_input)</span></div></foreignObject></g></g><g transform="translate(807.7421875, 319)" id="flowchart-D2-125" class="node default default flowchart-label"><rect height="34" width="146.078125" y="-17" x="-73.0390625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-65.5390625, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="131.078125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">FAISS index search</span></div></foreignObject></g></g><g transform="translate(807.7421875, 412.5)" id="flowchart-D3-127" class="node default default flowchart-label"><rect height="53" width="255.9375" y="-26.5" x="-127.96875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-120.46875, -19)" style="" class="label"><rect/><foreignObject height="38" width="240.9375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Weighted ranking:<br />similarity + recency + importance</span></div></foreignObject></g></g><g transform="translate(807.7421875, 506)" id="flowchart-D4-129" class="node default default flowchart-label"><rect height="34" width="204.265625" y="-17" x="-102.1328125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-94.6328125, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="189.265625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Session/Task scoping filter</span></div></foreignObject></g></g><g transform="translate(807.7421875, 590)" id="flowchart-D5-131" class="node default default flowchart-label"><rect height="34" width="267.703125" y="-17" x="-133.8515625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-126.3515625, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="252.703125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Hybrid keyword prefilter (optional)</span></div></foreignObject></g></g><g transform="translate(666.7421875, 870.5)" id="flowchart-G-139" class="node default default flowchart-label"><rect height="53" width="164.421875" y="-26.5" x="-82.2109375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-74.7109375, -19)" style="" class="label"><rect/><foreignObject height="38" width="149.421875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">LLM Adapter<br />(OpenAI / Anthropic)</span></div></foreignObject></g></g><g transform="translate(666.7421875, 964)" id="flowchart-H-141" class="node default default flowchart-label"><rect height="34" width="148.40625" y="-17" x="-74.203125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-66.703125, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="133.40625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Assistant Response</span></div></foreignObject></g></g><g transform="translate(1763.1640625, 1132)" id="flowchart-J-145" class="node default default flowchart-label"><rect height="34" width="217.546875" y="-17" x="-108.7734375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-101.2734375, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="202.546875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">STM.add_turn + token count</span></div></foreignObject></g></g><g transform="translate(1763.1640625, 1322.0546875)" id="flowchart-K-147" class="node default default flowchart-label"><polygon style="" transform="translate(-98.0546875,98.0546875)" class="label-container" points="98.0546875,0 196.109375,-98.0546875 98.0546875,-196.109375 0,-98.0546875"/><g transform="translate(-73.5546875, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="147.109375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">STM &gt; stm_capacity?</span></div></foreignObject></g></g><g transform="translate(1763.1640625, 1515.609375)" id="flowchart-N-153" class="node default default flowchart-label"><rect height="34" width="154.65625" y="-17" x="-77.328125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-69.828125, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="139.65625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Ready for next turn</span></div></foreignObject></g></g><g transform="translate(178.4453125, 1737.109375)" id="flowchart-P-155" class="node default default flowchart-label"><rect height="34" width="320.515625" y="-17" x="-160.2578125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-152.7578125, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="305.515625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Persist LTM: save(index.faiss, entries.json)</span></div></foreignObject></g></g><g transform="translate(178.4453125, 126)" id="flowchart-P2-156" class="node default default flowchart-label"><rect height="34" width="152.609375" y="-17" x="-76.3046875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-68.8046875, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="137.609375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Load LTM from disk</span></div></foreignObject></g></g></g></g></g></svg>